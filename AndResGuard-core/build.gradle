apply plugin: 'java'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

archivesBaseName = 'AndResGuard'

task buildJar(type: Copy, dependsOn: [build, jar]) {
    from('build/libs') { // 复制jar包
        include '*.jar'
    }
    into ('../example/')
}

task ok

task broken(dependsOn: ok) << {
    throw new RuntimeException('broken')
}

gradle.taskGraph.beforeTask { Task task ->
    println "executing $task ..."
}

gradle.taskGraph.afterTask { Task task, TaskState state ->
    if (state.failure) {
        println "FAILED"
    }
    else {
        println "done"
    }
}